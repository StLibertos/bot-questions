import discord
from discord.ext import commands
import random
import os
import asyncio

# Питання по категоріях
questions_data = {
    "сенс життя": [
        "Як ти вважаєш, чи є у кожної людини якась конкретна мета або призначення в житті? Якщо так, як ти її визначаєш?",
        "Що для тебе означає справжня любов? Чи вважаєш ти її основним сенсом людського існування?",
        "Як ти визначаєш свою ідентичність? Чи є вона постійною, чи змінюється в залежності від обставин та досвіду?",
        "Як ти вважаєш, чи може людина досягти повного саморозуміння? Якщо так, то яким чином?",
        "Як ти визначаєш поняття \"істинного Я\"? Чи можливо його повністю пізнати?",
        "Що для тебе означає бути вірним собі? Чи завжди це легко?",
        "Чи можеш ти жити у світі, де всі твої бажання здійснюються? Чи вважаєш ти, що це було б добре для тебе?",
        "Як ти визначаєш різницю між знанням та мудрістю?",
        "Як ти вважаєш, чи є людська культура продуктом випадковостей або чогось більшого, що керує розвитком суспільства?",
        "Що для тебе є найбільшим джерелом натхнення у житті, і як ти його підтримуєш?"
    ],
    "свобода": [
        "Чи вірите ви, що свобода є ілюзією? Які обмеження, на вашу думку, найбільше впливають на свободу особистості?",
        "Що для тебе означає бути вільною особистістю? Чи можлива свобода без відповідальності?",
        "Чи вірите ви, що доля людини визначена наперед, чи кожен здатен будувати своє життя самостійно?",
        "Що для тебе означає поняття \"свобода волі\"? Чи віриш ти, що ми можемо повністю контролювати свої рішення?",
        "Чи існує доля, чи все в житті залежить лише від наших рішень і дій?",
        "Як ти визначаєш межі особистої відповідальності? Де закінчується твоя відповідальність за власне життя і починається вплив зовнішніх факторів?",
        "Чи можливо жити в повній згоді з собою, не переймаючись думкою інших? Як ти до цього ставишся?",
        "Як ти вважаєш, чи існує справжня свобода у сучасному світі, де все більше впливу мають технології та соціальні норми?",
        "Як ти визначаєш межу між свободою слова та відповідальністю за свої слова?",
        "Чи може людина досягти повної незалежності від суспільства, і чи це бажана мета?"
    ],
    "мораль": [
        "Як ти думаєш, чи є мораль відносною, чи існують універсальні етичні принципи, якими повинні керуватися всі люди?",
        "Що для тебе означає справедливе суспільство?",
        "Як ти визначаєш концепцію справедливості? Чи можливо досягти її у суспільстві?",
        "Чи є мораль універсальною або вона змінюється в залежності від культурного контексту?",
        "Чи є ідеї або принципи, заради яких ти був би готовий пожертвувати чимось важливим у своєму житті?",
        "Як ти вважаєш, чи може мистецтво змінювати світ? Яку роль воно відіграє в житті людства?",
        "Що ти вважаєш найбільшою силою в людському житті – інтелект, любов, волю чи щось інше?",
        "Як ти вважаєш, чи можливо створити світ без конфліктів? Яким би він був?",
        "Чи може людство досягти гармонії з природою, і що для цього необхідно?",
        "Що, на твою думку, визначає справжню велич людини – її досягнення чи її вплив на інших?"
    ],
    "щастя": [
        "Чи є людське щастя тим, до чого варто прагнути, чи це лише побічний ефект глибшого сенсу життя?",
        "Як ти вважаєш, чи є біль необхідною складовою розвитку особистості? Яким досвідом вона збагачує?",
        "Чи можна вважати страждання невід'ємною частиною людського досвіду? Як ти ставишся до болю як до вчителя?",
        "Що, на твою думку, робить людину по-справжньому щасливою? Чи можливо досягти цього щастя на постійній основі?",
        "Як ти вважаєш, чи можуть страхи бути корисними? Чи можливо, що вони вказують нам на те, що для нас дійсно важливо?",
        "Чи можливо подолати людські страхи повністю, чи вони завжди будуть частиною нашого буття?",
        "Як ти визначаєш баланс між особистими бажаннями та відповідальністю перед іншими?",
        "Що для тебе є головною перешкодою на шляху до саморозвитку?",
        "Як ти вважаєш, чи є страждання необхідною частиною життя, чи його можна уникнути, живучи певним чином?",
        "Що для тебе означає поняття \"гармонія\"? Чи можна досягти її в повсякденному житті?"
    ],
    "знання": [
        "Як ти визначаєш справжню мудрість? Чи є вона результатом знань, досвіду або щось глибше?",
        "Як ти вважаєш, чи може людина досягти повного саморозуміння? Якщо так, то яким чином?",
        "Чи можна бути повністю об'єктивним, чи наші переконання завжди будуть впливати на наше сприйняття реальності?",
        "Як ти вважаєш, чи існує у всього сенс? Чи можливо деякі речі просто є і відбуваються без глибшого значення?",
        "Як ти визначаєш межу між реальністю та уявою? Чи є вони окремими, чи переплітаються?",
        "Як ти вважаєш, чи можна досягти абсолютної істини, чи всі наші знання є відносними?",
        "Чи існує істина абсолютною, чи кожен має свою правду, яка залежить від його світогляду та досвіду?",
        "Що для тебе важливіше: постійний пошук нових знань або використання вже наявних для покращення свого життя?",
        "Як ти вважаєш, чи може наука пояснити всі аспекти людського життя, чи є речі, які виходять за її межі?",
        "Як ти визначаєш успіх? Чи вважаєш ти його об'єктивним явищем, чи він суб'єктивний для кожної людини?"
    ],
    "суспільство": [
        "Як би ти описав ідеальний світ, у якому тобі хотілося б жити? Що для тебе означає справедливе суспільство?",
        "Чи може людство досягти гармонії з природою, і що для цього необхідно?",
        "Як ти вважаєш, чи може мистецтво змінювати світ? Яку роль воно відіграє в житті людства?",
        "Чи можливо досягти миру на всій планеті, і що для цього потрібно?",
        "Як ти вважаєш, чи може технологічний прогрес змінити природу людини? Як ти ставишся до можливого злиття людини з технологіями?",
        "Що для тебе є найбільшим викликом у сучасному суспільстві, і як ти з ним справляєшся?",
        "Як ти вважаєш, чи існує в сучасному світі місце для духовності? Як ти визначаєш свою духовну сторону?",
        "Чи може штучний інтелект коли-небудь досягти рівня свідомості? Що це означало б для людства?",
        "Як ти ставишся до ідеї паралельних реальностей? Чи може існувати декілька версій нас самих у різних світах?",
        "Як ти вважаєш, чи існує справжня свобода у сучасному світі, де все більше впливу мають технології та соціальні норми?"
    ]
}

# Встановлення префікса для команд та налаштування intents
intents = discord.Intents.default()
intents.message_content = True  # Необхідно для отримання повідомлень від користувачів
bot = commands.Bot(command_prefix='/', intents=intents)

@bot.event
async def on_ready():
    print(f'Бот {bot.user} успішно підключився до Discord!')

@bot.command()
async def deep_question(ctx, *, category=None):
    if category:
        category = category.lower()
        if category in questions_data:
            question = random.choice(questions_data[category])
            await ctx.send(question)
        else:
            await ctx.send("Вибачте, такої категорії не знайдено. Введіть `/deep_categories` для списку доступних категорій.")
    else:
        all_questions = [q for qs in questions_data.values() for q in qs]
        question = random.choice(all_questions)
        await ctx.send(question)

    # Додаємо реакцію для отримання наступного питання
    message = await ctx.send("Якщо хочеш наступне питання, натисни ➡️")
    await message.add_reaction('➡️')

    def check(reaction, user):
        return user == ctx.author and str(reaction.emoji) == '➡️' and reaction.message.id == message.id

    try:
        await bot.wait_for('reaction_add', timeout=60.0, check=check)
        await deep_question(ctx, category=category)
    except asyncio.TimeoutError:
        await ctx.send('Час очікування вичерпано.')

@bot.command()
async def deep_categories(ctx):
    categories_list = ', '.join(questions_data.keys())
    await ctx.send(f"**Доступні категорії:** {categories_list}")

@bot.command()
async def helpbot(ctx):
    help_message = """
**Привіт! Я філософський бот. Ось як мене використовувати:**

- `/deep_question` — отримати випадкове питання.
- `/deep_question [категорія]` — отримати питання з певної категорії.
- `/deep_categories` — переглянути список доступних категорій.
- `/helpbot` — показати цю підказку.
"""
    await ctx.send(help_message)

@bot.command()
async def deep_suggest(ctx, *, suggestion):
    admin_id = 'YOUR_DISCORD_ID'  # Замініть на ваш Discord ID
    admin_user = await bot.fetch_user(admin_id)
    await admin_user.send(f'Нова пропозиція від {ctx.author}: {suggestion}')
    await ctx.send("Дякуємо за вашу пропозицію! Ми розглянемо її найближчим часом.")

# Запуск бота
bot.run(os.getenv('DISCORD_BOT_TOKEN'))